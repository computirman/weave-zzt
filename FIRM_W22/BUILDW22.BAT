@echo off

if not exist BIN mkdir BIN
del BIN\*.*

if not exist DIST mkdir DIST
del DIST\*.*
cd DIST
if not exist FIRMDEMO mkdir FIRMDEMO
del FIRMDEMO\*.*
cd..

echo.
echo [ Building ZZT.EXE ]
echo.
TPC /B /EBIN /GD /ISRC_W22 /USRC_W22 SRC_W22\ZZT.PAS
if errorlevel 1 goto error
echo.
echo [ Compressing ZZT.EXE ]
echo.
cd BIN
..\TOOLS\LZEXE.EXE ZZT.EXE
cd ..

echo.
echo [ Creating DIST/ ]
echo.

copy BIN\ZZT.EXE DIST\ZZT.EXE
copy BIN\ZZT.DAT DIST\ZZT.DAT
copy LICENSE.TXT DIST\LICENSE.TXT
copy README.TXT DIST\README.TXT
copy SRC_W22\TEMPLATE.CFG DIST\TEMPLATE.CFG
copy SRC_W22\TEMPLATE.PAR DIST\TEMPLATE.PAR
copy SRC_W22\TEMPLATE.FLG DIST\TEMPLATE.FLG
copy SRC_W22\TEMPLATE.OOP DIST\TEMPLATE.OOP
copy SRC_W22\TEMPLATE.KB DIST\TEMPLATE.KB
copy SRC_W22\EXTENDED.OOP DIST\EXTENDED.OOP
copy SRC_W22\EXTENDED.OOP DIST\FIRMDEMO\FIRMDEMO.OOP
copy SRC_W22\FIRMDEMO.CFG DIST\FIRMDEMO\FIRMDEMO.CFG
copy SRC_W22\FIRMDEMO.PAR DIST\FIRMDEMO\FIRMDEMO.PAR
copy SRC_W22\FIRMDEMO.FLG DIST\FIRMDEMO\FIRMDEMO.FLG
copy SRC_W22\FIRMDEMO.KB DIST\FIRMDEMO\FIRMDEMO.KB
copy SRC_W22\EXAMPLE.OBJ DIST\FIRMDEMO\EXAMPLE.OBJ
copy SRC_W22\WONKY.OBJ DIST\FIRMDEMO\WONKY.OBJ
copy SRC_W22\BEARBUL.OBJ DIST\FIRMDEMO\BEARBUL.OBJ
copy FIRMDEMO.ZZT DIST\FIRMDEMO\FIRMDEMO.ZZT
goto done
:error
echo.
echo [ Error detected! Stopping. ]
:done
copy DIST\ZZT.EXE DIST\FWEAVE22.EXE

